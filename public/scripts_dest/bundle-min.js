var Game;!function(){const t=[0,1,2,3,4,5,6,10,12,15,20,30,60];var e;Game=function(t){this.area=0,this.stage=t,this.tiles=[],this.speed=3,this.process=0},Game.prototype={setBg:function(){e=cjsUtil.createMc("Background"),e.gotoAndStop(this.area),this.stage.addChild(e)},createMap:function(t){var e=this;_.times(t.x,function(i){_.times(t.y,function(t){var n=cjsUtil.createMc("Tile");e.tiles.push(n),n.x=60*i,n.y=60*t,e.stage.addChild(n)})})},gameLoop:function(){this.process>=Cood.UNIT?(this.process=0,this.snake.update(),this.snake.hitTest()&&(console.log("GameOver"),this.gameOver())):(this.snake.move(this.process),this.process+=t[this.speed]),this.stage.update()},startGameLoop:function(){console.log("--start loop--"),this.setBg(),this.createMap(new Vector(Cood.MAX_X,Cood.MAX_Y)),this.snake=new Snake(this.stage,new Vector(1,1)),KeyManager.setKeyListeners({119:_.bind(function(){this.snake.setDirection(DIRECTION.n.clone())},this),97:_.bind(function(){this.snake.setDirection(DIRECTION.w.clone())},this),115:_.bind(function(){this.snake.setDirection(DIRECTION.s.clone())},this),100:_.bind(function(){this.snake.setDirection(DIRECTION.e.clone())},this)}),createjs.Ticker.addEventListener("tick",_.bind(this.gameLoop,this)),createjs.Ticker.init()},gameOver:function(){createjs.Ticker.removeAllEventListeners()}}}();var cjsUtil,stage,game;$(function(){cjsUtil=new CjsUtil(AdobeAn,"12203EAFB022374BAF15F927FCA8A97A"),cjsUtil.loadImages(function(){stage=new createjs.Stage($("#canvas--main").get(0)),game=new Game(stage),game.startGameLoop()})});var Areas;!function(){Areas=[{items:[]}]}(),function(t,e){function i(){var t=this._cloneProps(new this.constructor(this.mode,this.startPosition,this.loop));return t.gotoAndStop(this.currentFrame),t.paused=this.paused,t.framerate=this.framerate,t}var n,s={},o={},A={};s.ssMetadata=[],(s.yfts=function(){this.initialize(A.yfts)}).prototype=n=new t.Bitmap,n.nominalBounds=new t.Rectangle(0,0,778,338),(s.Tile=function(e,i,n){this.initialize(e,i,n,{}),this.shape=new t.Shape,this.shape.graphics.f().s("#FF9900").ss(.1,1,1).p("AEEELIoWANAEakAQgFD7AID6Aj6kOIH1gJAkcECIAPny"),this.shape.setTransform(29.8,29.5),this.timeline.addTween(t.Tween.get(this.shape).wait(1)),this.shape_1=new t.Shape,this.shape_1.graphics.f().s("#FF9900").ss(.1,1,1).p("Aj6kXIHuAGAkcD/IAGn4AEVkDIAIH1AD/EQIoRAI"),this.shape_1.setTransform(30.3,29.9),this.timeline.addTween(t.Tween.get(this.shape_1).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(.3,.6,59.6,58.4),(s.Eye=function(e,i,n){this.initialize(e,i,n,{}),this.shape=new t.Shape,this.shape.graphics.f("#333333").s().p("AgKALQgFgFABgGQgBgFAFgFQAFgFAFABQAGgBAFAFQAFAFgBAFQABAGgFAFQgFAFgGgBQgFABgFgFg"),this.timeline.addTween(t.Tween.get(this.shape).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(-1.5,-1.5,3.1,3.1),(s.BodyPart=function(e,i,n){this.initialize(e,i,n,{}),this.shape=new t.Shape,this.shape.graphics.f("#00CC00").s().p("Ah/CAQg0g1AAhLQAAhKA0g1QA1g0BKAAQBLAAA1A0QA0A1AABKQAABLg0A1Qg1A0hLAAQhKAAg1g0g"),this.timeline.addTween(t.Tween.get(this.shape).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(-18,-18,36,36),(s.Root=function(e,i,n){this.initialize(e,i,n,{}),this.instance=new s.yfts,this.instance.parent=this,this.instance.setTransform(-182,-306),this.timeline.addTween(t.Tween.get(this.instance).wait(1))}).prototype=function(e,n,s){var o=t.extend(e,t.MovieClip);return o.clone=i,o.nominalBounds=n,o.frameBounds=s,o}(s.Root,new t.Rectangle(-182,-306,778,338),null),(s.Bubble_body=function(e,i,n){this.initialize(e,i,n,{}),this.shape=new t.Shape,this.shape.graphics.f("#E2EFFF").s().p("AlYFYQiOiOAAjKQAAjICOiQQCQiODIAAQDKAACOCOQCPCQAADIQAADKiPCOQiOCPjKAAQjIAAiQiPg"),this.shape.setTransform(48.7,48.7),this.timeline.addTween(t.Tween.get(this.shape).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(0,0,97.4,97.4),(s.Head=function(e,i,n){this.initialize(e,i,n,{}),this.instance=new s.Eye("synched",0),this.instance.parent=this,this.instance.setTransform(6,4.5),this.timeline.addTween(t.Tween.get(this.instance).to({y:-1.8},18).to({y:17.8},24).to({y:5.1},21).wait(1)),this.instance_1=new s.Eye("synched",0),this.instance_1.parent=this,this.instance_1.setTransform(5.8,-7.4),this.timeline.addTween(t.Tween.get(this.instance_1).to({y:-13.7},18).to({y:5.9},24).to({y:-6.8},21).wait(1)),this.instance_2=new s.BodyPart("synched",0),this.instance_2.parent=this,this.timeline.addTween(t.Tween.get(this.instance_2).to({y:-7.7},19).to({y:12.2},24).to({y:.6},20).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(-18,-18,36,36),(s.Body=function(e,i,n){this.initialize(e,i,n,{}),this.instance=new s.BodyPart("synched",0),this.instance.parent=this,this.timeline.addTween(t.Tween.get(this.instance).to({y:-10.5},22).to({y:9.9},25).to({y:.3},24).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(-18,-18,36,36),(s.Bubble=function(e,i,n){this.initialize(e,i,n,{}),this.instance=new s.Bubble_body("synched",0),this.instance.parent=this,this.instance.setTransform(48.7,48.7,1,1,0,0,0,48.7,48.7),this.timeline.addTween(t.Tween.get(this.instance).to({x:79.5},23).to({x:54.3},24).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(0,0,97.4,97.4),(s.SnakeHead=function(e,i,n){this.initialize(e,i,n,{}),this.body=new s.Head,this.body.name="body",this.body.parent=this,this.body.setTransform(30,30),this.timeline.addTween(t.Tween.get(this.body).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(12,12,36,36),(s.SnakeBody=function(e,i,n){this.initialize(e,i,n,{}),this.body=new s.Body,this.body.name="body",this.body.parent=this,this.body.setTransform(30,30),this.timeline.addTween(t.Tween.get(this.body).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(12,12,36,36),(s.Bubble_float=function(e,i,n){this.initialize(e,i,n,{}),this.instance=new s.Bubble("synched",0),this.instance.parent=this,this.instance.setTransform(80.7,970.8,1,1,0,0,0,48.7,48.7),this.timeline.addTween(t.Tween.get(this.instance).to({y:-58.4},119).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(32,922.1,97.4,97.4),(s.bg_area_01=function(e,i,n){this.initialize(e,i,n,{}),this.instance=new s.Bubble_float("synched",0),this.instance.parent=this,this.instance.setTransform(915.2,0),this.instance._off=!0,this.timeline.addTween(t.Tween.get(this.instance).wait(88).to({_off:!1},0).to({_off:!0},120).wait(33).to({_off:!1,x:653.7},0).to({_off:!0},120).wait(9).to({_off:!1,x:803.9},0).to({_off:!0},120).wait(28).to({_off:!1,x:973.6},0).to({_off:!0},120).wait(23).to({_off:!1,x:795.6},0).to({_off:!0},120).wait(11)),this.instance_1=new s.Bubble_float("synched",0),this.instance_1.parent=this,this.instance_1.setTransform(289.3,0),this.timeline.addTween(t.Tween.get(this.instance_1).to({_off:!0},120).wait(71).to({_off:!1,x:281},0).to({_off:!0},120).wait(40).to({_off:!1,x:130.8},0).to({_off:!0},120).wait(13).to({_off:!1,x:456.2},0).to({_off:!0},120).wait(32).to({_off:!1,x:400.6},0).to({_off:!0},120).wait(36)),this.shape=new t.Shape,this.shape.graphics.f("#BAD5F7").s().p("EhdvBGUMAAAiMnMC7fAAAMAAACMng"),this.shape.setTransform(600,450),this.timeline.addTween(t.Tween.get(this.shape).wait(792))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(0,0,1200,1019.5),(s.Background=function(e,i,n){this.initialize(e,i,n,{}),this.instance=new s.bg_area_01,this.instance.parent=this,this.instance.setTransform(600,450,1,1,0,0,0,600,450),this.timeline.addTween(t.Tween.get(this.instance).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(0,0,1200,1019.5),(s.tsnake=function(e,i,n){this.initialize(e,i,n,{}),this.shape=new t.Shape,this.shape.graphics.f("#FF9900").s().p("AqLPoQgdgbgBgsIAA61IgIAAQgjgBgbghQgZgggCgtQACgrAYgfQAaggAjgCIVigTQAnABAZAdQAYAdACAxQgCAxgXAfQgYAegmAAIx/ARIAAJyIOngMQAoABAaAdQAYAdACAxQgCAxgVAeQgWAfglAAIuxAMIAAKdIR/gJQAmACAZAdQAZAdABAwQgBAxgYAeQgXAfgnAAIyBAHQgDApgeAXQgdAZgwAAQgyAAgegbg"),this.shape.setTransform(1095.4,717.8),this.shape_1=new t.Shape,this.shape_1.graphics.f("#FF9900").s().p("ArGPoQgdgcgBgsIAA8+QABgsAegcQAfgcAugBQAwABAeAcQAfAcABAsIAAMoQCyh5CxiSQCwiRCYiWQCYiVBriFQAUgbAVgMQAVgMAbABQAuABAhAhQAhAhABAwQABARgHAQQgHAPgaAgQgbAeg8BAQiICTisCZQisCbjMChIOHOdQANAMAGAUQAHAUAAAXQgBA0ghAlQgiAkgzABQgUAAgUgIQgUgKgPgQIuGvLIgZASQg6ArgcASQgcATgcAQIAAMgQgBAsgfAcQgeAcgwAAQgwAAgegcg"),this.shape_1.setTransform(924.9,713.6),this.shape_2=new t.Shape,this.shape_2.graphics.f("#FF9900").s().p("AtvQEQgigdgCgtQACgPAqhuQAqhvBKi1QBIi2BejhIDDnRQBljxBljoIAnhbIAfhIIAOgiQAKgeAUgLQAVgNAjABQAvAAAfAcQAeAbABAoIgBAPIgFAVIAAADIgEAHQgDACgDAGQBFCxBICtQBKCuBdDKQBdDKB/EJQCAEJCxFoQAHALACAKQADAIAAAJQgBAtgkAdQghAfg1ABQgnACgVgTQgVgRgghBQhOiahcjCQhbjBhxkAQhzj9iTlQIhXjMIhNC5QhFCig0B7IheDjIhTDRICHgCIDAgDIB4gBQA2gBAJgCIA2gEIAogBQAsABAeAdQAcAeABAtQAAAhgNAcQgNAegWAMQgHAHgQACQgOACgnABIh2ACIixAEQhlAChyAFIgwABIgjABQgkAAgLgCQgNgDgLgIIgZA8IgXA7Ig4COIg6CRIgjBfIgPAlQgDAJgEADQgKAPgWAJQgTAIgcAAQgygBgggfg"),this.shape_2.setTransform(732.8,713.4),this.shape_3=new t.Shape,this.shape_3.graphics.f("#FF9900").s().p("ArQP1QgcgQgHgTIgSgoIACgKIAi7hIgXgfQgHgJgFgOQgDgMAAgQQABgxAegcQAggdA1gCQAfgBAUANQAUAOAkAvQDmErESGGQESGFFKHxIAA4PQABgsAfgcQAegcAwgBQAwABAfAcQAeAcABAsIAAb0QgBBHglArQgnArhAABQgiAAgggPQgegOgWgaIgOgVQgNgTgcgsQjUk6iwkAQitj+iUjQQiTjSiBivIgDEsIgLMjQgFEggFBRQgDAsghAcQghAcguAAQgdAAgdgPg"),this.shape_3.setTransform(538.9,713.6),this.shape_4=new t.Shape,this.shape_4.graphics.f("#FF9900").s().p("Ak/PKQiag6hshmQgxgtgZgqQgYgsAAgiQABg2AmgkQAlgkA4gBQAmgCAWAQQAXAPAbAuQBABgB3A6QB3A8CLABQDJgBBrhQQBshRABiWQADiDhuheQhvhdj9hSQjZhHiBhQQiChSg5hrQg4hsABiVQABiXBUh3QBVh2CRhEQCThFC5gBQBsABBlAgQBlAgBVA7QBUA8A3BPQAfAuAPAiQAPAiAAAcQgCAzgjAfQgjAhg3ABQgmAAgZgQQgYgRgOggQgwh5hfg8Qhfg8iSACQi1ABhpBTQhpBTgBCQQgDBgAmBCQAkBCBcAzQBcAzCjAzQFIBqCnCbQCnCbAADLQgBCahYB2QhWB2iZBEQiYBEjGABQingBiag5g"),this.shape_4.setTransform(359.4,713.6),this.shape_5=new t.Shape,this.shape_5.graphics.f("#FF9900").s().p("AkjBlQgogBgZgcQgZgbgBgtQABgrAZgbQAZgdAogBIJJAAQAoABAZAdQAXAbABArQgBAtgZAbQgYAcgnABg"),this.shape_5.setTransform(227.2,713.5),this.shape_6=new t.Shape,this.shape_6.graphics.f("#FF9900").s().p("AhWPQQgegcgBgsIAA6IIh/ACIhoABIh9AAIjEAAIhoAAIgngBQgJAAgCgCQgegEgVgfQgXgegBgmQABgfARgeQAQgdAZgNQANgHAegCQAfgDBAADICpgEID5gCIEcgEIEVgCIDdgBIB7AAQA4gEAvgBIA7gCQA3ABAeAcQAeAcAAAzQgBArgXAgQgWAeggAGIhdAEIitAEQhmAEh1ABQh1ACh1ABIAAaIQgBAsgfAcQgeAcgvAAQgwAAgfgcg"),this.shape_6.setTransform(87,716),this.timeline.addTween(t.Tween.get({}).to({state:[{t:this.shape_6},{t:this.shape_5},{t:this.shape_4},{t:this.shape_3},{t:this.shape_2},{t:this.shape_1},{t:this.shape}]}).wait(1)),this.instance=new s.SnakeHead,this.instance.parent=this,this.instance.setTransform(180.1,263.5,1,1,0,0,0,27.1,27.1),this.instance_1=new s.SnakeBody,this.instance_1.parent=this,this.instance_1.setTransform(116.9,264,1,1,0,0,0,27.1,27.1),this.timeline.addTween(t.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1)),this.instance_2=new s.Tile("synched",0),this.instance_2.parent=this,this.instance_2.setTransform(30,30,1,1,0,0,0,30,30),this.timeline.addTween(t.Tween.get(this.instance_2).wait(1)),this.instance_3=new s.Root,this.instance_3.parent=this,this.instance_3.setTransform(932.4,521.2,1,1,0,0,0,389,169),this.timeline.addTween(t.Tween.get(this.instance_3).wait(1)),this.instance_4=new s.Background("synched",0),this.instance_4.parent=this,this.instance_4.setTransform(600,450,1,1,0,0,0,600,450),this.timeline.addTween(t.Tween.get(this.instance_4).wait(1))}).prototype=n=new t.MovieClip,n.nominalBounds=new t.Rectangle(594.9,450,1205.1,1019.5),s.properties={id:"12203EAFB022374BAF15F927FCA8A97A",width:1200,height:900,fps:24,color:"#CCCCCC",opacity:1,manifest:[{src:"../../images/yfts.png",id:"yfts"}],preloads:[]},(s.Stage=function(t){createjs.Stage.call(this,t)}).prototype=n=new createjs.Stage,n.setAutoPlay=function(t){this.tickEnabled=t},n.play=function(){this.tickEnabled=!0,this.getChildAt(0).gotoAndPlay(this.getTimelinePosition())},n.stop=function(t){t&&this.seek(t),this.tickEnabled=!1},n.seek=function(t){this.tickEnabled=!0,this.getChildAt(0).gotoAndStop(s.properties.fps*t/1e3)},n.getDuration=function(){return this.getChildAt(0).totalFrames/s.properties.fps*1e3},n.getTimelinePosition=function(){return this.getChildAt(0).currentFrame/s.properties.fps*1e3},e.bootcompsLoaded=e.bootcompsLoaded||[],e.bootstrapListeners||(e.bootstrapListeners=[]),e.bootstrapCallback=function(t){if(e.bootstrapListeners.push(t),e.bootcompsLoaded.length>0)for(var i=0;i<e.bootcompsLoaded.length;++i)t(e.bootcompsLoaded[i])},e.compositions=e.compositions||{},e.compositions["12203EAFB022374BAF15F927FCA8A97A"]={getStage:function(){return exportRoot.getStage()},getLibrary:function(){return s},getSpriteSheet:function(){return o},getImages:function(){return A}},e.compositionLoaded=function(t){e.bootcompsLoaded.push(t);for(var i=0;i<e.bootstrapListeners.length;i++)e.bootstrapListeners[i](t)},e.getComposition=function(t){return e.compositions[t]}}(createjs=createjs||{},AdobeAn=AdobeAn||{});var createjs,AdobeAn,Cood;!function(){Cood={UNIT:60,MAX_X:20,MAX_Y:15,localToWorld:function(t){return t*this.UNIT}}}();var Vector=function(t,e){this.x=t,this.y=e},DIRECTION;Vector.prototype={clone:function(){return new Vector(this.x,this.y)},isCopyOf:function(t){this.x=t.x,this.y=t.y},add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){this.x-=t.x,this.y-=t.y},mult:function(t){return new Vector(this.x*t,this.y*t)},isZero:function(){return 0==this.x&&0==this.y},equals:function(t){return this.x==t.x&&this.y==t.y}},DIRECTION={n:new Vector(0,-1),e:new Vector(1,0),s:new Vector(0,1),w:new Vector(-1,0)};var KeyManager;!function(){$(window).keypress(function(t){KeyManager.listeners[t.which]&&KeyManager.listeners[t.which]()}),KeyManager={listeners:{},setKeyListeners:function(t){_.each(t,_.bind(function(t,e){this.listeners[e]=t},this))}}}();var SnakeBody;!function(){SnakeBody=function(t,e,i){this.stage=t,this.mc=i?cjsUtil.createMc("SnakeHead"):cjsUtil.createMc("SnakeBody"),this.mc.body.gotoAndPlay(Math.floor(60*Math.random())),this.stage.addChildAt(this.mc,this.stage.numChildren),this.position=e.clone(),this.direction=DIRECTION.s.clone()},SnakeBody.prototype={pos:function(t){this.position.x=t.x,this.position.y=t.y},dir:function(t){t.x==this.direction.x&&t.y==this.direction.y||(this.direction.x=t.x,this.direction.y=t.y,-1==t.x?this.mc.body.rotation=180:1==t.x?this.mc.body.rotation=0:1==t.y?this.mc.body.rotation=90:this.mc.body.rotation=270,this.mc.body.gotoAndPlay(Math.floor(60*Math.random())))},update:function(t){this.mc.x=Cood.localToWorld(this.position.x)+t.x,this.mc.y=Cood.localToWorld(this.position.y)+t.y}}}();var Snake;!function(){Snake=function(t,e){this.stage=t,this.bodies=[],this.addBody(e),this.addBody(e),this.addBody(e),this.addBody(e),this.addBody(e),this.addBody(e),this.direction=DIRECTION.s.clone()},Snake.prototype={addBody:function(t){var e=new SnakeBody(this.stage,t,0==this.bodies.length);this.bodies.push(e)},move:function(t){_.forEach(this.bodies,_.bind(function(e){e.update(e.direction.mult(t))},this))},update:function(){var t,e,i=0;_.forEach(this.bodies,_.bind(function(n){if(0==i)t=n.direction.clone(),e=n.position.clone(),n.position.add(n.direction),n.dir(this.direction);else{var s=n.direction.clone(),o=n.position.clone();n.dir(t),n.pos(e),t.isCopyOf(s),e.isCopyOf(o)}for(;n.position.x>=Cood.MAX_X;)n.position.x-=Cood.MAX_X;for(;n.position.y>=Cood.MAX_Y;)n.position.y-=Cood.MAX_Y;for(;n.position.x<0;)n.position.x+=Cood.MAX_X;for(;n.position.y<0;)n.position.y+=Cood.MAX_Y;n.update(new Vector(0,0)),i++},this))},hitTest:function(){var t,e=0,i=!1;return _.forEach(this.bodies,_.bind(function(n){0==e?t=n.position:n.position.equals(t)&&(i=!0),e++},this)),i},getHead:function(){return this.bodies[0]},setDirection:function(t){this.getHead().direction.clone().add(t).isZero()||(this.direction=t)}}}();